apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - "./oauth2proxy"
  - "./keycloak"
  - "./istio"
  - "./postgres"
  - "./platform-gateway.yaml"
  - "./argocd"
  - "./coredns-cm.yaml"
  - "./crossplane"
patches:
  - path: "connection-checker.yaml"
    target:
      kind: Deployment
      annotationSelector: "await=service"
  - path: "connection-checker.yaml"
    target:
      kind: Job
      annotationSelector: "await=service"
  - path: "keycloak-auth-patch.yaml"
    target:
      kind: Job
      annotationSelector: "patch=keycloakcredentials"

